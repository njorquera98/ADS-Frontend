

<div class="container m-auto py-6 px-8">
    <div class="flex flex-col w-full bg-white rounded-lg shadow-md pt-4 pb-2 dark:bg-gray-800">
        <h3 class="text-xl text-gray-900 font-semibold px-6 mb-4 dark:text-gray-200">
            Aprobaciones y rechazos de ayudantias
        </h3>
        <div class="w-full overflow-x-auto">
            <table class="w-full border-collapse">
                <thead class="text-sm text-white uppercase font-semibold bg-gray-800 dark:bg-gray-600 dark:text-gray-300">
                    <tr>
                        <th scope="col" class="px-6 py-3 whitespace-nowrap text-left">
                            #
                        </th>
                        <th scope="col" class="px-6 py-3 whitespace-nowrap text-left">
                            Asignatura
                        </th>
                        <th scope="col" class="px-4 py-3 whitespace-nowrap text-center">
                            Prioridad
                        </th>
                        <th scope="col" class="px-4 py-3 whitespace-nowrap text-center">
                            Promedio de Asignatura
                        </th>
                        <th scope="col" class="px-4 py-3 whitespace-nowrap text-center">
                            Promedio de Notas
                        </th>
                        <th scope="col" class="px-4 py-3 whitespace-nowrap text-center">
                            Estado
                        </th>
                        <th scope="col" class="px-4 py-3 whitespace-nowrap text-center">
                            Acciones
                        </th>
                    </tr>
                </thead>
                <tbody class="text-sm dark:text-gray-300">
                    @for (solicitud of solicitudesService.solicitudes; track solicitud.id_solicitud) {
                    <tr class="hover:bg-gray-100 dark:hover:bg-gray-700">
                        <td class="border-t-0 py-4 pl-6 border-l-0 border-r-0 whitespace-nowrap">
                            {{ solicitud.id_solicitud }}
                        </td>
                        <td class="border-t-0 py-4 pl-6 border-l-0 border-r-0 whitespace-nowrap">
                            {{ getAsignatura(solicitud)?.nombre }} {{ getAsignatura(solicitud)?.letra }}
                        </td>
                        <td class="border-t-0 p-4 border-l-0 border-r-0 whitespace-nowrap text-center">
                            {{ solicitud.prioridad }}
                        </td>
                        <td class="border-t-0 p-4 border-l-0 border-r-0 whitespace-nowrap text-center">
                            {{ solicitud.promedio_asignatura }}
                        </td>
                        <td class="border-t-0 p-4 border-l-0 border-r-0 whitespace-nowrap text-center">
                            {{ getUser(solicitud)?.promedio_notas }}
                        </td>
                        <td class="flex justify-center border-t-0 p-4 border-l-0 border-r-0 whitespace-nowrap">
                            <div class="flex justify-center items-center w-56">
                                @if (solicitud.estado === 'Creado') {
                                    <button class="flex mr-6 justify-center items-center w-9 h-9 rounded-lg focus:outline-none text-white bg-green-700 hover:bg-green-800 focus:ring-4 
                                    focus:ring-green-300 dark:bg-green-600 
                                    dark:hover:bg-green-700 dark:focus:ring-green-900"
                                            type="button"        
                                            title="Aprobar"
                                            (click)="aprobarSolicitud(solicitud)">
                                        <i class="fa-regular fa-thumbs-up"></i>
                                    </button>
                                    <button class="flex justify-center items-center w-9 h-9 rounded-lg focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 
                                    focus:ring-red-300 dark:bg-red-600 
                                    dark:hover:bg-red-700 dark:focus:ring-red-900"
                                            type="button"        
                                            title="Rechazar"
                                            (click)="rechazarSolicitud(solicitud)">
                                        <i class="fa-regular fa-thumbs-down"></i>
                                    </button>
                                } @else {
                                    @if (solicitud.estado === 'Aprobado') {
                                        <span class="text-center mr-4 py-1 w-24 rounded-lg bg-green-300 text-green-950"
                                        >{{ solicitud.estado }}</span>
                                    } @else {
                                        <span class="text-center mr-4 py-1 w-24 rounded-lg bg-red-300 text-red-900"
                                        >{{ solicitud.estado }}</span>
                                    }
                                    <button class="flex justify-center items-center w-9 h-9 rounded-lg focus:outline-none text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 
                                    font-medium dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
                                            type="button"        
                                            title="Reset"
                                            (click)="reset(solicitud)">
                                        <i class="fa-solid fa-repeat"></i>
                                    </button>
                                }
                            </div>
                        </td>
                        <td class="border-t-0 p-4 border-l-0 border-r-0 whitespace-nowrap">
                            <div class="flex justify-center items-center w-full rounded-lg space-x-6">
                                <button class="flex justify-center items-center w-9 h-9 rounded-lg focus:outline-none text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 
                                font-medium dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
                                            type="button"        
                                            title="Ver"
                                            [routerLink]="['ver', solicitud.id_solicitud]">
                                    <i class="fa-regular fa-eye fa-lg"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
